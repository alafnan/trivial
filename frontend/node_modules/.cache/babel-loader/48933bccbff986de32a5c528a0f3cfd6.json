{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BADER\\\\Desktop\\\\FSND\\\\projects\\\\02_trivia_api\\\\starter\\\\frontend\\\\src\\\\components\\\\QuestionView.js\";\nimport React, { Component } from 'react';\nimport '../stylesheets/App.css';\nimport Question from './Question';\nimport Search from './Search';\nimport $ from 'jquery';\n\nclass QuestionView extends Component {\n  constructor() {\n    super();\n\n    this.getQuestions = () => {\n      $.ajax({\n        url: \"/questions?page=\".concat(this.state.page),\n        //TODO: update request URL\n        type: 'GET',\n        success: result => {\n          this.setState({\n            questions: result.questions,\n            totalQuestions: result.total_questions,\n            categories: result.categories,\n            currentCategory: result.current_category\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load questions. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.getByCategory = id => {\n      $.ajax({\n        url: 'http://127.0.0.1:5000/categories/${id}/questions',\n        //TODO: update request URL\n        type: 'GET',\n        success: result => {\n          this.setState({\n            questions: result.questions,\n            totalQuestions: result.total_questions,\n            currentCategory: result.current_category\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load questions. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.submitSearch = searchTerm => {\n      $.ajax({\n        url: 'http://127.0.0.1:5000/questions/search',\n        //TODO: update request URL\n        type: 'POST',\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify({\n          searchTerm: searchTerm\n        }),\n        xhrFields: {\n          withCredentials: true\n        },\n        crossDomain: true,\n        success: result => {\n          this.setState({\n            questions: result.questions,\n            totalQuestions: result.total_questions,\n            currentCategory: result.current_category\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load questions. Please try your request again');\n          return;\n        }\n      });\n    };\n\n    this.questionAction = id => action => {\n      if (action === 'DELETE') {\n        if (window.confirm('are you sure you want to delete the question?')) {\n          $.ajax({\n            url: 'http://127.0.0.1:5000/questions/${id}',\n            //TODO: update request URL\n            type: 'DELETE',\n            success: result => {\n              this.getQuestions();\n            },\n            error: error => {\n              alert('Unable to load questions. Please try your request again');\n              return;\n            }\n          });\n        }\n      }\n    };\n\n    this.state = {\n      questions: [],\n      page: 1,\n      totalQuestions: 0,\n      categories: {},\n      currentCategory: null\n    };\n  }\n\n  componentDidMount() {\n    this.getQuestions();\n  }\n\n  selectPage(num) {\n    this.setState({\n      page: num\n    }, () => this.getQuestions());\n  }\n\n  createPagination() {\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalQuestions / 10);\n\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push(React.createElement(\"span\", {\n        key: i,\n        className: \"page-num \".concat(i === this.state.page ? 'active' : ''),\n        onClick: () => {\n          this.selectPage(i);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, i));\n    }\n\n    return pageNumbers;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"question-view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"categories-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      onClick: () => {\n        this.getQuestions();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Categories\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, Object.keys(this.state.categories).map(id => React.createElement(\"li\", {\n      key: id,\n      onClick: () => {\n        this.getByCategory(id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, this.state.categories[id], React.createElement(\"img\", {\n      className: \"category\",\n      src: \"\".concat(this.state.categories[id], \".svg\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })))), React.createElement(Search, {\n      submitSearch: this.submitSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"questions-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Questions\"), this.state.questions.map((q, ind) => React.createElement(Question, {\n      key: q.id,\n      question: q.question,\n      answer: q.answer,\n      category: this.state.categories[q.category],\n      difficulty: q.difficulty,\n      questionAction: this.questionAction(q.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"pagination-menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.createPagination())));\n  }\n\n}\n\nexport default QuestionView;","map":{"version":3,"sources":["C:\\Users\\BADER\\Desktop\\FSND\\projects\\02_trivia_api\\starter\\frontend\\src\\components\\QuestionView.js"],"names":["React","Component","Question","Search","$","QuestionView","constructor","getQuestions","ajax","url","state","page","type","success","result","setState","questions","totalQuestions","total_questions","categories","currentCategory","current_category","error","alert","getByCategory","id","submitSearch","searchTerm","dataType","contentType","data","JSON","stringify","xhrFields","withCredentials","crossDomain","questionAction","action","window","confirm","componentDidMount","selectPage","num","createPagination","pageNumbers","maxPage","Math","ceil","i","push","render","Object","keys","map","q","ind","question","answer","category","difficulty"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nimport '../stylesheets/App.css'\r\nimport Question from './Question'\r\nimport Search from './Search'\r\nimport $ from 'jquery'\r\n\r\nclass QuestionView extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      questions: [],\r\n      page: 1,\r\n      totalQuestions: 0,\r\n      categories: {},\r\n      currentCategory: null\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getQuestions()\r\n  }\r\n\r\n  getQuestions = () => {\r\n    $.ajax({\r\n      url: `/questions?page=${this.state.page}`, //TODO: update request URL\r\n      type: 'GET',\r\n      success: result => {\r\n        this.setState({\r\n          questions: result.questions,\r\n          totalQuestions: result.total_questions,\r\n          categories: result.categories,\r\n          currentCategory: result.current_category\r\n        })\r\n        return\r\n      },\r\n      error: error => {\r\n        alert('Unable to load questions. Please try your request again')\r\n        return\r\n      }\r\n    })\r\n  }\r\n\r\n  selectPage(num) {\r\n    this.setState({ page: num }, () => this.getQuestions())\r\n  }\r\n\r\n  createPagination() {\r\n    let pageNumbers = []\r\n    let maxPage = Math.ceil(this.state.totalQuestions / 10)\r\n    for (let i = 1; i <= maxPage; i++) {\r\n      pageNumbers.push(\r\n        <span\r\n          key={i}\r\n          className={`page-num ${i === this.state.page ? 'active' : ''}`}\r\n          onClick={() => {\r\n            this.selectPage(i)\r\n          }}\r\n        >\r\n          {i}\r\n        </span>\r\n      )\r\n    }\r\n    return pageNumbers\r\n  }\r\n\r\n  getByCategory = id => {\r\n    $.ajax({\r\n      url: 'http://127.0.0.1:5000/categories/${id}/questions', //TODO: update request URL\r\n      type: 'GET',\r\n      success: result => {\r\n        this.setState({\r\n          questions: result.questions,\r\n          totalQuestions: result.total_questions,\r\n          currentCategory: result.current_category\r\n        })\r\n        return\r\n      },\r\n      error: error => {\r\n        alert('Unable to load questions. Please try your request again')\r\n        return\r\n      }\r\n    })\r\n  }\r\n\r\n  submitSearch = searchTerm => {\r\n    $.ajax({\r\n      url: 'http://127.0.0.1:5000/questions/search', //TODO: update request URL\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      contentType: 'application/json',\r\n      data: JSON.stringify({ searchTerm: searchTerm }),\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      crossDomain: true,\r\n      success: result => {\r\n        this.setState({\r\n          questions: result.questions,\r\n          totalQuestions: result.total_questions,\r\n          currentCategory: result.current_category\r\n        })\r\n        return\r\n      },\r\n      error: error => {\r\n        alert('Unable to load questions. Please try your request again')\r\n        return\r\n      }\r\n    })\r\n  }\r\n\r\n  questionAction = id => action => {\r\n    if (action === 'DELETE') {\r\n      if (window.confirm('are you sure you want to delete the question?')) {\r\n        $.ajax({\r\n          url: 'http://127.0.0.1:5000/questions/${id}', //TODO: update request URL\r\n          type: 'DELETE',\r\n          success: result => {\r\n            this.getQuestions()\r\n          },\r\n          error: error => {\r\n            alert('Unable to load questions. Please try your request again')\r\n            return\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='question-view'>\r\n        <div className='categories-list'>\r\n          <h2\r\n            onClick={() => {\r\n              this.getQuestions()\r\n            }}\r\n          >\r\n            Categories\r\n          </h2>\r\n          <ul>\r\n            {Object.keys(this.state.categories).map(id => (\r\n              <li\r\n                key={id}\r\n                onClick={() => {\r\n                  this.getByCategory(id)\r\n                }}\r\n              >\r\n                {this.state.categories[id]}\r\n                <img\r\n                  className='category'\r\n                  src={`${this.state.categories[id]}.svg`}\r\n                />\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <Search submitSearch={this.submitSearch} />\r\n        </div>\r\n        <div className='questions-list'>\r\n          <h2>Questions</h2>\r\n          {this.state.questions.map((q, ind) => (\r\n            <Question\r\n              key={q.id}\r\n              question={q.question}\r\n              answer={q.answer}\r\n              category={this.state.categories[q.category]}\r\n              difficulty={q.difficulty}\r\n              questionAction={this.questionAction(q.id)}\r\n            />\r\n          ))}\r\n          <div className='pagination-menu'>{this.createPagination()}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default QuestionView"]},"metadata":{},"sourceType":"module"}